import{o as e,r as _,w as S}from"./chunk-UIGDSWPH-DWOOOxqk.js";import{o as f,W as E}from"./store.provider-C9rYaGrA.js";import{L}from"./link-CvXtRfRL.js";import{u as h}from"./index-Dc4aw0qJ.js";import{g as W,B as A}from"./button-CJES52DI-LZmtqnY7.js";import{b as R}from"./index-BVHUuPnE.js";import{t as T,w as B,L as t}from"./index-vgvgxTJM.js";import{c as P,d as O,b as i}from"./index-CzOQsu2R.js";import{u as g}from"./use-workspace-B7avqqlp.js";import{E as M}from"./external-link-CxtUi1X8.js";import{u as $}from"./use-instance-CkArE5we.js";import"./index-Dq3cOres.js";import"./helper-CmYjNUif.js";import"./classname-iNHf9Pb8-5LSAqF-w.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=P("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),F=f(function({workspaceId:l}){const{getWorkspaceById:r}=g(),s=r(l);return s?e.jsxs("a",{href:`${E}/${encodeURIComponent(s.slug)}`,target:"_blank",className:"group flex items-center justify-between p-4 gap-2.5 truncate border border-custom-border-200/70 hover:border-custom-border-200 hover:bg-custom-background-90 rounded-md",rel:"noreferrer",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:`relative flex h-8 w-8 flex-shrink-0 items-center justify-center p-2 mt-1 text-xs uppercase ${!s?.logo_url&&"rounded bg-custom-primary-500 text-white"}`,children:s?.logo_url&&s.logo_url!==""?e.jsx("img",{src:O(s.logo_url),className:"absolute left-0 top-0 h-full w-full rounded object-cover",alt:"Workspace Logo"}):s?.name?.[0]??"..."}),e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsxs("div",{className:"flex flex-wrap w-full items-center gap-2.5",children:[e.jsx("h3",{className:"text-base font-medium capitalize",children:s.name}),"/",e.jsx(T,{tooltipContent:"The unique URL of your workspace",children:e.jsxs("h4",{className:"text-sm text-custom-text-300",children:["[",s.slug,"]"]})})]}),s.owner.email&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("h3",{className:"text-custom-text-200 font-medium",children:"Owned by:"}),e.jsx("h4",{className:"text-custom-text-300",children:s.owner.email})]}),e.jsxs("div",{className:"flex items-center gap-2.5 text-xs",children:[s.total_projects!==null&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("h3",{className:"text-custom-text-200 font-medium",children:"Total projects:"}),e.jsx("h4",{className:"text-custom-text-300",children:s.total_projects})]}),s.total_members!==null&&e.jsxs(e.Fragment,{children:["•",e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("h3",{className:"text-custom-text-200 font-medium",children:"Total members:"}),e.jsx("h4",{className:"text-custom-text-300",children:s.total_members})]})]})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(M,{size:14,className:"text-custom-text-400 group-hover:text-custom-text-200"})})]},l):null}),U=f(function(l){const[r,s]=_.useState(!1),{formattedConfig:n,fetchInstanceConfigurations:N,updateInstanceConfigurations:v}=$(),{workspaceIds:c,loader:a,paginationInfo:m,fetchWorkspaces:w,fetchNextWorkspaces:k}=g(),x=n?.DISABLE_WORKSPACE_CREATION??"",y=m?.next_page_results&&m?.next_cursor!==void 0;h("INSTANCE_CONFIGURATIONS",()=>N()),h("INSTANCE_WORKSPACES",()=>w());const d=async(o,b)=>{s(!0);const I={[o]:b},p=v(I);R(p,{loading:"Saving configuration",success:{title:"Success",message:()=>"Configuration saved successfully"},error:{title:"Error",message:()=>"Failed to save configuration"}}),await p.then(()=>{s(!1)}).catch(C=>{console.error(C),s(!1)})};return e.jsxs("div",{className:"relative container mx-auto w-full h-full p-4 py-4 space-y-6 flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between gap-4 border-b border-custom-border-100 mx-4 py-4 space-y-1 flex-shrink-0",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"text-xl font-medium text-custom-text-100",children:"Workspaces on this instance"}),e.jsx("div",{className:"text-sm font-normal text-custom-text-300",children:"See all workspaces and control who can create them."})]})}),e.jsx("div",{className:"flex-grow overflow-hidden overflow-y-scroll vertical-scrollbar scrollbar-md px-4",children:e.jsxs("div",{className:"space-y-3",children:[n?e.jsxs("div",{className:i("w-full flex items-center gap-14 rounded"),children:[e.jsx("div",{className:"flex grow items-center gap-4",children:e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"text-lg font-medium pb-1",children:"Prevent anyone else from creating a workspace."}),e.jsx("div",{className:i("font-normal leading-5 text-custom-text-300 text-xs"),children:"Toggling this on will let only you create workspaces. You will have to invite users to new workspaces."})]})}),e.jsx("div",{className:`shrink-0 pr-4 ${r&&"opacity-70"}`,children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(B,{value:!!parseInt(x),onChange:()=>{parseInt(x)?d("DISABLE_WORKSPACE_CREATION","0"):d("DISABLE_WORKSPACE_CREATION","1")},size:"sm",disabled:r})})})]}):e.jsx(t,{children:e.jsx(t.Item,{height:"50px",width:"100%"})}),a!=="init-loader"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pt-6 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-col items-start gap-x-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-medium",children:["All workspaces on this instance"," ",e.jsxs("span",{className:"text-custom-text-300",children:["• ",c.length]}),a&&["mutation","pagination"].includes(a)&&e.jsx(u,{className:"w-4 h-4 animate-spin"})]}),e.jsx("div",{className:i("font-normal leading-5 text-custom-text-300 text-xs"),children:"You can't yet delete workspaces and you can only go to the workspace if you are an Admin or a Member."})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(L,{href:"/workspace/create",className:W("primary","sm"),children:"Create workspace"})})]}),e.jsx("div",{className:"flex flex-col gap-4 py-2",children:c.map(o=>e.jsx(F,{workspaceId:o},o))}),y&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(A,{variant:"link-primary",onClick:()=>k(),disabled:a==="pagination",children:["Load more",a==="pagination"&&e.jsx(u,{className:"w-3 h-3 animate-spin"})]})})]}):e.jsxs(t,{className:"space-y-10 py-8",children:[e.jsx(t.Item,{height:"24px",width:"20%"}),e.jsx(t.Item,{height:"92px",width:"100%"}),e.jsx(t.Item,{height:"92px",width:"100%"}),e.jsx(t.Item,{height:"92px",width:"100%"})]})]})})]})}),te=()=>[{title:"Workspace Management - God Mode"}],ae=S(U);export{ae as default,te as meta};

import{o as e,r as N,w as A}from"./chunk-UIGDSWPH-DWOOOxqk.js";import{o as g}from"./store.provider-C9rYaGrA.js";import{u as G}from"./index-Dc4aw0qJ.js";import{b as L}from"./index-BVHUuPnE.js";import{z as p,w,L as r}from"./index-vgvgxTJM.js";import{c as h,b as l,r as C}from"./index-CzOQsu2R.js";import{u as j}from"./use-instance-CkArE5we.js";import{y as S}from"./index.module-D2LUA61L.js";import{g as E}from"./gitea-logo-B7V18nrw.js";import{g as k,a as T}from"./github-white-ChyV_wsU.js";import{G as M}from"./gitlab-logo-Di094duH.js";import{G as P}from"./google-logo-C_szah0w.js";import{A as _}from"./authentication-method-card-QbZyRS5a.js";import{S as B,E as U,P as D,G as O,a as R,b as q}from"./password-config-switch-CPChmo_o.js";import{L as x}from"./link-CvXtRfRL.js";import{g as z}from"./button-CJES52DI-LZmtqnY7.js";import"./index-Dq3cOres.js";import"./classname-iNHf9Pb8-5LSAqF-w.js";import"./helper-CmYjNUif.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=h("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=h("Mails",[["rect",{width:"16",height:"13",x:"6",y:"4",rx:"2",key:"1drq3f"}],["path",{d:"m22 7-7.1 3.78c-.57.3-1.23.3-1.8 0L6 7",key:"xn252p"}],["path",{d:"M2 8v11c0 1.1.9 2 2 2h14",key:"n13cji"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=h("SquareArrowOutUpRight",[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6",key:"y09zxi"}],["path",{d:"m21 3-9 9",key:"mpx6sq"}],["path",{d:"M15 3h6v6",key:"1q9fwt"}]]),K="/god-mode/assets/oidc-logo-Cvut7oPT.svg",W="/god-mode/assets/saml-logo-4VwRX8hS.svg",$=g(function(o){const{disabled:i,updateConfig:n}=o,{formattedConfig:a}=j(),t=a?.IS_GITEA_ENABLED??"",c=!!a?.GITEA_HOST&&!!a?.GITEA_CLIENT_ID&&!!a?.GITEA_CLIENT_SECRET;return e.jsx(e.Fragment,{children:c?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{href:"/authentication/gitea",className:l(p("link-primary","md"),"font-medium"),children:"Edit"}),e.jsx(w,{value:!!parseInt(t),onChange:()=>{parseInt(t)?n("IS_GITEA_ENABLED","0"):n("IS_GITEA_ENABLED","1")},size:"sm",disabled:i})]}):e.jsxs(x,{href:"/authentication/gitea",className:l(p("neutral-primary","sm"),"text-custom-text-300"),children:[e.jsx(B,{className:"h-4 w-4 p-0.5 text-custom-text-300/80"}),"Configure"]})})});function f(){return e.jsxs("a",{href:"https://plane.so/pricing?mode=self-hosted",target:"_blank",className:l(z("primary","sm")),rel:"noreferrer",children:["Upgrade",e.jsx(V,{className:"h-3.5 w-3.5 p-0.5"})]})}const X=({disabled:s,updateConfig:o,resolvedTheme:i})=>[{key:"unique-codes",name:"Unique codes",description:"Log in or sign up for Plane using codes sent via email. You need to have set up SMTP to use this method.",icon:e.jsx(H,{className:"h-6 w-6 p-0.5 text-custom-text-300/80"}),config:e.jsx(U,{disabled:s,updateConfig:o})},{key:"passwords-login",name:"Passwords",description:"Allow members to create accounts with passwords and use it with their email addresses to sign in.",icon:e.jsx(F,{className:"h-6 w-6 p-0.5 text-custom-text-300/80"}),config:e.jsx(D,{disabled:s,updateConfig:o})},{key:"google",name:"Google",description:"Allow members to log in or sign up for Plane with their Google accounts.",icon:e.jsx("img",{src:P,height:20,width:20,alt:"Google Logo"}),config:e.jsx(O,{disabled:s,updateConfig:o})},{key:"github",name:"GitHub",description:"Allow members to log in or sign up for Plane with their GitHub accounts.",icon:e.jsx("img",{src:C(i)==="dark"?k:T,height:20,width:20,alt:"GitHub Logo"}),config:e.jsx(R,{disabled:s,updateConfig:o})},{key:"gitlab",name:"GitLab",description:"Allow members to log in or sign up to plane with their GitLab accounts.",icon:e.jsx("img",{src:M,height:20,width:20,alt:"GitLab Logo"}),config:e.jsx(q,{disabled:s,updateConfig:o})},{key:"gitea",name:"Gitea",description:"Allow members to log in or sign up to plane with their Gitea accounts.",icon:e.jsx("img",{src:E,height:20,width:20,alt:"Gitea Logo"}),config:e.jsx($,{disabled:s,updateConfig:o})},{key:"oidc",name:"OIDC",description:"Authenticate your users via the OpenID Connect protocol.",icon:e.jsx("img",{src:K,height:22,width:22,alt:"OIDC Logo"}),config:e.jsx(f,{}),unavailable:!0},{key:"saml",name:"SAML",description:"Authenticate your users via the Security Assertion Markup Language protocol.",icon:e.jsx("img",{src:W,height:22,width:22,alt:"SAML Logo",className:"pl-0.5"}),config:e.jsx(f,{}),unavailable:!0}],Y=g(function(o){const{disabled:i,updateConfig:n}=o,{resolvedTheme:a}=S();return e.jsx(e.Fragment,{children:X({disabled:i,updateConfig:n,resolvedTheme:a}).map(t=>e.jsx(_,{name:t.name,description:t.description,icon:t.icon,config:t.config,disabled:i,unavailable:t.unavailable},t.key))})}),J=g(function(o){const{fetchInstanceConfigurations:i,formattedConfig:n,updateInstanceConfigurations:a}=j();G("INSTANCE_CONFIGURATIONS",()=>i());const[t,c]=N.useState(!1),u=n?.ENABLE_SIGNUP??"",m=async(v,y)=>{c(!0);const I={[v]:y},d=a(I);L(d,{loading:"Saving configuration",success:{title:"Success",message:()=>"Configuration saved successfully"},error:{title:"Error",message:()=>"Failed to save configuration"}}),await d.then(()=>{c(!1)}).catch(b=>{console.error(b),c(!1)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative container mx-auto w-full h-full p-4 py-4 space-y-6 flex flex-col",children:[e.jsxs("div",{className:"border-b border-custom-border-100 mx-4 py-4 space-y-1 flex-shrink-0",children:[e.jsx("div",{className:"text-xl font-medium text-custom-text-100",children:"Manage authentication modes for your instance"}),e.jsx("div",{className:"text-sm font-normal text-custom-text-300",children:"Configure authentication modes for your team and restrict sign-ups to be invite only."})]}),e.jsx("div",{className:"flex-grow overflow-hidden overflow-y-scroll vertical-scrollbar scrollbar-md px-4",children:n?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:l("w-full flex items-center gap-14 rounded"),children:[e.jsx("div",{className:"flex grow items-center gap-4",children:e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"text-lg font-medium pb-1",children:"Allow anyone to sign up even without an invite"}),e.jsx("div",{className:l("font-normal leading-5 text-custom-text-300 text-xs"),children:"Toggling this off will only let users sign up when they are invited."})]})}),e.jsx("div",{className:`shrink-0 pr-4 ${t&&"opacity-70"}`,children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(w,{value:!!parseInt(u),onChange:()=>{parseInt(u)?m("ENABLE_SIGNUP","0"):m("ENABLE_SIGNUP","1")},size:"sm",disabled:t})})})]}),e.jsx("div",{className:"text-lg font-medium pt-6",children:"Available authentication modes"}),e.jsx(Y,{disabled:t,updateConfig:m})]}):e.jsxs(r,{className:"space-y-10",children:[e.jsx(r.Item,{height:"50px",width:"75%"}),e.jsx(r.Item,{height:"50px",width:"75%"}),e.jsx(r.Item,{height:"50px",width:"40%"}),e.jsx(r.Item,{height:"50px",width:"40%"}),e.jsx(r.Item,{height:"50px",width:"20%"})]})})]})})}),fe=()=>[{title:"Authentication Settings - Plane Web"}],we=A(J);export{we as default,fe as meta};

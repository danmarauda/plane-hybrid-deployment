import{r,R as E}from"./chunk-UIGDSWPH-DWOOOxqk.js";const k=["light","dark"],x="(prefers-color-scheme: dark)",N=typeof window>"u",L=r.createContext(void 0),j={setTheme:e=>{},themes:[]},H=()=>{var e;return(e=r.useContext(L))!==null&&e!==void 0?e:j},P=e=>r.useContext(L)?E.createElement(r.Fragment,null,e.children):E.createElement(R,e),J=["light","dark"],R=({forcedTheme:e,disableTransitionOnChange:u=!1,enableSystem:t=!0,enableColorScheme:$=!0,storageKey:i="theme",themes:s=J,defaultTheme:n=t?"system":"light",attribute:v="data-theme",value:h,children:b,nonce:S})=>{const[c,l]=r.useState(()=>M(i,n)),[p,m]=r.useState(()=>M(i)),y=h?Object.values(h):s,T=r.useCallback(a=>{let o=a;if(!o)return;a==="system"&&t&&(o=O());const w=h?h[o]:o,I=u?z():null,C=document.documentElement;if(v==="class"?(C.classList.remove(...y),w&&C.classList.add(w)):w?C.setAttribute(v,w):C.removeAttribute(v),$){const A=k.includes(n)?n:null,K=k.includes(o)?o:A;C.style.colorScheme=K}I?.()},[]),d=r.useCallback(a=>{l(a);try{localStorage.setItem(i,a)}catch{}},[e]),f=r.useCallback(a=>{const o=O(a);m(o),c==="system"&&t&&!e&&T("system")},[c,e]);r.useEffect(()=>{const a=window.matchMedia(x);return a.addListener(f),f(a),()=>a.removeListener(f)},[f]),r.useEffect(()=>{const a=o=>{o.key===i&&d(o.newValue||n)};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[d]),r.useEffect(()=>{T(e??c)},[e,c]);const g=r.useMemo(()=>({theme:c,setTheme:d,forcedTheme:e,resolvedTheme:c==="system"?p:c,themes:t?[...s,"system"]:s,systemTheme:t?p:void 0}),[c,d,e,p,t,s]);return E.createElement(L.Provider,{value:g},E.createElement(_,{forcedTheme:e,disableTransitionOnChange:u,enableSystem:t,enableColorScheme:$,storageKey:i,themes:s,defaultTheme:n,attribute:v,value:h,children:b,attrs:y,nonce:S}),b)},_=r.memo(({forcedTheme:e,storageKey:u,attribute:t,enableSystem:$,enableColorScheme:i,defaultTheme:s,value:n,attrs:v,nonce:h})=>{const b=s==="system",S=t==="class"?`var d=document.documentElement,c=d.classList;c.remove(${v.map(m=>`'${m}'`).join(",")});`:`var d=document.documentElement,n='${t}',s='setAttribute';`,c=i?k.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",l=(m,y=!1,T=!0)=>{const d=n?n[m]:m,f=y?m+"|| ''":`'${d}'`;let g="";return i&&T&&!y&&k.includes(m)&&(g+=`d.style.colorScheme = '${m}';`),t==="class"?g+=y||d?`c.add(${f})`:"null":d&&(g+=`d[s](n,${f})`),g},p=e?`!function(){${S}${l(e)}}()`:$?`!function(){try{${S}var e=localStorage.getItem('${u}');if('system'===e||(!e&&${b})){var t='${x}',m=window.matchMedia(t);if(m.media!==t||m.matches){${l("dark")}}else{${l("light")}}}else if(e){${n?`var x=${JSON.stringify(n)};`:""}${l(n?"x[e]":"e",!0)}}${b?"":"else{"+l(s,!1,!1)+"}"}${c}}catch(e){}}()`:`!function(){try{${S}var e=localStorage.getItem('${u}');if(e){${n?`var x=${JSON.stringify(n)};`:""}${l(n?"x[e]":"e",!0)}}else{${l(s,!1,!1)};}${c}}catch(t){}}();`;return E.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:p}})},()=>!0),M=(e,u)=>{if(N)return;let t;try{t=localStorage.getItem(e)||void 0}catch{}return t||u},z=()=>{const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},O=e=>(e||(e=window.matchMedia(x)),e.matches?"dark":"light");export{P as $,H as y};

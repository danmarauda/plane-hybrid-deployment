import{r as I,o as e,w}from"./chunk-UIGDSWPH-DWOOOxqk.js";import{o as g}from"./store.provider-C9rYaGrA.js";import{u as y}from"./use-instance-CkArE5we.js";import{u as C,C as _}from"./index.esm-XeU7nagb.js";import{B as S}from"./button-CJES52DI-LZmtqnY7.js";import{s as E,a as k}from"./index-BVHUuPnE.js";import{w as v,I as j}from"./index-vgvgxTJM.js";import{C as T}from"./controller-input-Ch9fJpKv.js";import{u as A}from"./index-Dc4aw0qJ.js";import{c as N}from"./index-CzOQsu2R.js";import"./index-Dq3cOres.js";import"./classname-iNHf9Pb8-5LSAqF-w.js";import"./eye-CKm8Qo8U.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=N("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=N("Telescope",[["path",{d:"m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44",key:"k4qptu"}],["path",{d:"m13.56 11.747 4.332-.924",key:"19l80z"}],["path",{d:"m16 21-3.105-6.21",key:"7oh9d"}],["path",{d:"M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z",key:"m7xp4m"}],["path",{d:"m6.158 8.633 1.114 4.456",key:"74o979"}],["path",{d:"m8 21 3.105-6.21",key:"1fvxut"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]]),z=g(function(a){const{isTelemetryEnabled:s}=a,{instanceConfigurations:c,updateInstanceConfigurations:d,fetchInstanceConfigurations:m}=y(),[u,x]=I.useState(!1),n=s?c?c?.find(t=>t.key==="IS_INTERCOM_ENABLED")?.value==="1":void 0:!1,{isLoading:f}=A(s?"INSTANCE_CONFIGURATIONS":null,()=>s?m():null),h=f&&n===void 0,l=async t=>{try{await d(t)}catch(i){console.error(i)}finally{x(!1)}},p=()=>{l({IS_INTERCOM_ENABLED:n?"0":"1"})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center gap-14 px-4 py-3 border border-custom-border-200 rounded",children:e.jsxs("div",{className:"grow flex items-center gap-4",children:[e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-custom-background-80 rounded-full",children:e.jsx(L,{className:"w-6 h-6 text-custom-text-300/80 p-0.5"})})}),e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"text-sm font-medium text-custom-text-100 leading-5",children:"Chat with us"}),e.jsx("div",{className:"text-xs font-normal text-custom-text-300 leading-5",children:"Let your users chat with us via Intercom or another service. Toggling Telemetry off turns this off automatically."})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(v,{value:!!n,onChange:p,size:"sm",disabled:!s||u||h})})]})})})}),B=g(function(a){const{instance:s,instanceAdmins:c}=a,{instanceConfigurations:d,updateInstanceInfo:m,updateInstanceConfigurations:u}=y(),{handleSubmit:x,control:n,watch:f,formState:{errors:h,isSubmitting:l}}=C({defaultValues:{instance_name:s?.instance_name,is_telemetry_enabled:s?.is_telemetry_enabled}}),p=async t=>{const i={...t},b=d?.find(r=>r.key==="IS_INTERCOM_ENABLED")?.value==="1";if(!i.is_telemetry_enabled&&b)try{await u({IS_INTERCOM_ENABLED:"0"})}catch(r){console.error(r)}await m(i).then(()=>E({type:k.SUCCESS,title:"Success",message:"Settings updated successfully"})).catch(r=>console.error(r))};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-lg font-medium",children:"Instance details"}),e.jsxs("div",{className:"grid-col grid w-full grid-cols-1 items-center justify-between gap-8 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(T,{name:"instance_name",control:n,type:"text",label:"Name of instance",placeholder:"Instance name",error:!!h.instance_name,required:!0},"instance_name"),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h4",{className:"text-sm text-custom-text-300",children:"Email"}),e.jsx(j,{id:"email",name:"email",type:"email",value:c[0]?.user_detail?.email??"",placeholder:"Admin email",className:"w-full cursor-not-allowed !text-custom-text-400",autoComplete:"on",disabled:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h4",{className:"text-sm text-custom-text-300",children:"Instance ID"}),e.jsx(j,{id:"instance_id",name:"instance_id",type:"text",value:s.instance_id,className:"w-full cursor-not-allowed rounded-md font-medium !text-custom-text-400",disabled:!0})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-lg font-medium",children:"Chat + telemetry"}),e.jsx(z,{isTelemetryEnabled:f("is_telemetry_enabled")??!1}),e.jsxs("div",{className:"flex items-center gap-14 px-4 py-3 border border-custom-border-200 rounded",children:[e.jsxs("div",{className:"grow flex items-center gap-4",children:[e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-custom-background-80 rounded-full",children:e.jsx(M,{className:"w-6 h-6 text-custom-text-300/80 p-0.5"})})}),e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"text-sm font-medium text-custom-text-100 leading-5",children:"Let Plane collect anonymous usage data"}),e.jsxs("div",{className:"text-xs font-normal text-custom-text-300 leading-5",children:["No PII is collected.This anonymized data is used to understand how you use Plane and build new features in line with"," ",e.jsx("a",{href:"https://developers.plane.so/self-hosting/telemetry",target:"_blank",className:"text-custom-primary-100 hover:underline",rel:"noreferrer",children:"our Telemetry Policy."})]})]})]}),e.jsx("div",{className:`shrink-0 ${l&&"opacity-70"}`,children:e.jsx(_,{control:n,name:"is_telemetry_enabled",render:({field:{value:t,onChange:i}})=>e.jsx(v,{value:t??!1,onChange:i,size:"sm",disabled:l})})})]})]}),e.jsx("div",{children:e.jsx(S,{variant:"primary",onClick:x(p),loading:l,children:l?"Saving...":"Save changes"})})]})});function G(){const{instance:o,instanceAdmins:a}=y();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative container mx-auto w-full h-full p-4 py-4 space-y-6 flex flex-col",children:[e.jsxs("div",{className:"border-b border-custom-border-100 mx-4 py-4 space-y-1 flex-shrink-0",children:[e.jsx("div",{className:"text-xl font-medium text-custom-text-100",children:"General settings"}),e.jsx("div",{className:"text-sm font-normal text-custom-text-300",children:"Change the name of your instance and instance admin e-mail addresses. Enable or disable telemetry in your instance."})]}),e.jsx("div",{className:"flex-grow overflow-hidden overflow-y-scroll vertical-scrollbar scrollbar-md px-4",children:o&&a&&e.jsx(B,{instance:o,instanceAdmins:a})})]})})}const K=()=>[{title:"General Settings - God Mode"}],Q=w(g(G));export{Q as default,K as meta};

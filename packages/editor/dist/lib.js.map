{"version":3,"file":"lib.js","names":[],"sources":["../src/core/constants/document-collaborative-events.ts","../src/core/helpers/get-document-server-event.ts"],"sourcesContent":["import type { EPageAccess } from \"@plane/constants\";\nimport type { TPage } from \"@plane/types\";\nimport type { CreatePayload, BaseActionPayload } from \"@/types\";\n\n// Define all payload types for each event.\nexport type ArchivedPayload = CreatePayload<{ archived_at: string | null }>;\nexport type UnarchivedPayload = BaseActionPayload;\nexport type LockedPayload = CreatePayload<{ is_locked: boolean }>;\nexport type UnlockedPayload = BaseActionPayload;\nexport type MadePublicPayload = CreatePayload<{ access: EPageAccess }>;\nexport type MadePrivatePayload = CreatePayload<{ access: EPageAccess }>;\nexport type DeletedPayload = CreatePayload<{ deleted_at: Date | null }>;\nexport type DuplicatedPayload = CreatePayload<{ new_page_id: string }>;\nexport type PropertyUpdatedPayload = CreatePayload<Partial<TPage>>;\nexport type MovedPayload = CreatePayload<{\n  new_project_id: string;\n  new_page_id: string;\n}>;\nexport type RestoredPayload = CreatePayload<{ deleted_page_ids?: string[] }>;\nexport type ErrorPayload = CreatePayload<{\n  error_message: string;\n  error_type: \"fetch\" | \"store\";\n  error_code?: \"content_too_large\" | \"page_locked\" | \"page_archived\";\n  should_disconnect?: boolean;\n}>;\n\n// Enhanced DocumentCollaborativeEvents with payload types.\n// Both the client name and server name are defined, and we add a \"payloadType\" property\n// so that we can later derive a mapping from client event to payload type.\nexport const DocumentCollaborativeEvents = {\n  lock: {\n    client: \"locked\",\n    server: \"lock\",\n    payloadType: {} as LockedPayload,\n  },\n  unlock: {\n    client: \"unlocked\",\n    server: \"unlock\",\n    payloadType: {} as UnlockedPayload,\n  },\n  archive: {\n    client: \"archived\",\n    server: \"archive\",\n    payloadType: {} as ArchivedPayload,\n  },\n  unarchive: {\n    client: \"unarchived\",\n    server: \"unarchive\",\n    payloadType: {} as UnarchivedPayload,\n  },\n  \"make-public\": {\n    client: \"made-public\",\n    server: \"make-public\",\n    payloadType: {} as MadePublicPayload,\n  },\n  \"make-private\": {\n    client: \"made-private\",\n    server: \"make-private\",\n    payloadType: {} as MadePrivatePayload,\n  },\n  delete: {\n    client: \"deleted\",\n    server: \"delete\",\n    payloadType: {} as DeletedPayload,\n  },\n  move: {\n    client: \"moved\",\n    server: \"move\",\n    payloadType: {} as MovedPayload,\n  },\n  duplicate: {\n    client: \"duplicated\",\n    server: \"duplicate\",\n    payloadType: {} as DuplicatedPayload,\n  },\n  property_update: {\n    client: \"property_updated\",\n    server: \"property_update\",\n    payloadType: {} as PropertyUpdatedPayload,\n  },\n  restore: {\n    client: \"restored\",\n    server: \"restore\",\n    payloadType: {} as RestoredPayload,\n  },\n  error: {\n    client: \"error\",\n    server: \"error\",\n    payloadType: {} as ErrorPayload,\n  },\n} as const;\n","import { DocumentCollaborativeEvents } from \"@/constants/document-collaborative-events\";\nimport type {\n  TDocumentEventKey,\n  TDocumentEventsClient,\n  TDocumentEventsServer,\n} from \"@/types/document-collaborative-events\";\n\nexport const getServerEventName = (clientEvent: TDocumentEventsClient): TDocumentEventsServer | undefined => {\n  for (const key in DocumentCollaborativeEvents) {\n    if (DocumentCollaborativeEvents[key as TDocumentEventKey].client === clientEvent) {\n      return DocumentCollaborativeEvents[key as TDocumentEventKey].server;\n    }\n  }\n  return undefined;\n};\n"],"mappings":";;;AA6BA,MAAa,8BAA8B;CACzC,MAAM;EACJ,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,QAAQ;EACN,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,SAAS;EACP,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,WAAW;EACT,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,eAAe;EACb,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,gBAAgB;EACd,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,QAAQ;EACN,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,MAAM;EACJ,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,WAAW;EACT,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,iBAAiB;EACf,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,SAAS;EACP,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACD,OAAO;EACL,QAAQ;EACR,QAAQ;EACR,aAAa,EAAE;EAChB;CACF;;;;ACnFD,MAAa,sBAAsB,gBAA0E;AAC3G,MAAK,MAAM,OAAO,4BAChB,KAAI,4BAA4B,KAA0B,WAAW,YACnE,QAAO,4BAA4B,KAA0B"}
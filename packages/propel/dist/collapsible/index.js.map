{"version":3,"file":"index.js","names":["BaseCollapsible"],"sources":["../../src/collapsible/collapsible.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, createContext, useContext } from \"react\";\nimport { Collapsible as BaseCollapsible } from \"@base-ui-components/react/collapsible\";\nimport clsx from \"clsx\";\n\n// Types\ntype CollapsibleContextType = {\n  isOpen: boolean;\n  onToggle: () => void;\n};\n\ntype RootProps = {\n  children: React.ReactNode;\n  className?: string;\n  isOpen?: boolean;\n  onToggle?: () => void;\n  defaultOpen?: boolean;\n};\n\ntype TriggerProps = {\n  children: React.ReactNode;\n  className?: string;\n  buttonRef?: React.RefObject<HTMLButtonElement>;\n};\n\ntype ContentProps = {\n  children: React.ReactNode;\n  className?: string;\n};\n\n// Context\nconst CollapsibleContext = createContext<CollapsibleContextType | undefined>(undefined);\n\n// Hook\nconst useCollapsible = () => {\n  const context = useContext(CollapsibleContext);\n  if (!context) {\n    throw new Error(\"Collapsible compound components cannot be rendered outside the Collapsible component\");\n  }\n  return context;\n};\n\n// Components\nfunction Root({ children, className, isOpen: controlledIsOpen, onToggle, defaultOpen }: RootProps) {\n  const [localIsOpen, setLocalIsOpen] = useState<boolean>(controlledIsOpen || defaultOpen || false);\n\n  useEffect(() => {\n    if (controlledIsOpen !== undefined) {\n      setLocalIsOpen(controlledIsOpen);\n    }\n  }, [controlledIsOpen]);\n\n  const handleToggle = useCallback(() => {\n    if (controlledIsOpen !== undefined) {\n      onToggle?.();\n    } else {\n      setLocalIsOpen((prev) => !prev);\n    }\n  }, [controlledIsOpen, onToggle]);\n\n  return (\n    <CollapsibleContext.Provider value={{ isOpen: localIsOpen, onToggle: handleToggle }}>\n      <BaseCollapsible.Root\n        className={clsx(className)}\n        defaultOpen={defaultOpen}\n        open={localIsOpen}\n        onOpenChange={handleToggle}\n      >\n        {children}\n      </BaseCollapsible.Root>\n    </CollapsibleContext.Provider>\n  );\n}\n\nfunction Trigger({ children, className, buttonRef }: TriggerProps) {\n  const { isOpen } = useCollapsible();\n\n  return (\n    <BaseCollapsible.Trigger data-panel-open={isOpen} ref={buttonRef} className={className}>\n      {children}\n    </BaseCollapsible.Trigger>\n  );\n}\n\nfunction Content({ children, className }: ContentProps) {\n  return (\n    <BaseCollapsible.Panel\n      className={clsx(\n        \"flex h-[var(--collapsible-panel-height)] flex-col overflow-hidden text-sm transition-all ease-out data-[ending-style]:h-0 data-[starting-style]:h-0\",\n        className\n      )}\n    >\n      {children}\n    </BaseCollapsible.Panel>\n  );\n}\n\n// Compound Component\nexport const Collapsible = {\n  CollapsibleRoot: Root,\n  CollapsibleTrigger: Trigger,\n  CollapsibleContent: Content,\n};\n"],"mappings":";;;;;;AA8BA,MAAM,qBAAqB,cAAkD,OAAU;AAGvF,MAAM,uBAAuB;CAC3B,MAAM,UAAU,WAAW,mBAAmB;AAC9C,KAAI,CAAC,QACH,OAAM,IAAI,MAAM,uFAAuF;AAEzG,QAAO;;AAIT,SAAS,KAAK,EAAE,UAAU,WAAW,QAAQ,kBAAkB,UAAU,eAA0B;CACjG,MAAM,CAAC,aAAa,kBAAkB,SAAkB,oBAAoB,eAAe,MAAM;AAEjG,iBAAgB;AACd,MAAI,qBAAqB,OACvB,gBAAe,iBAAiB;IAEjC,CAAC,iBAAiB,CAAC;CAEtB,MAAM,eAAe,kBAAkB;AACrC,MAAI,qBAAqB,OACvB,aAAY;MAEZ,iBAAgB,SAAS,CAAC,KAAK;IAEhC,CAAC,kBAAkB,SAAS,CAAC;AAEhC,QACE,oBAAC,mBAAmB;EAAS,OAAO;GAAE,QAAQ;GAAa,UAAU;GAAc;YACjF,oBAACA,cAAgB;GACf,WAAW,KAAK,UAAU;GACb;GACb,MAAM;GACN,cAAc;GAEb;IACoB;GACK;;AAIlC,SAAS,QAAQ,EAAE,UAAU,WAAW,aAA2B;CACjE,MAAM,EAAE,WAAW,gBAAgB;AAEnC,QACE,oBAACA,cAAgB;EAAQ,mBAAiB;EAAQ,KAAK;EAAsB;EAC1E;GACuB;;AAI9B,SAAS,QAAQ,EAAE,UAAU,aAA2B;AACtD,QACE,oBAACA,cAAgB;EACf,WAAW,KACT,uJACA,UACD;EAEA;GACqB;;AAK5B,MAAa,cAAc;CACzB,iBAAiB;CACjB,oBAAoB;CACpB,oBAAoB;CACrB"}
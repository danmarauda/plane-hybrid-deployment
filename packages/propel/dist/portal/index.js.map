{"version":3,"file":"index.js","names":[],"sources":["../../src/portal/constants.ts","../../src/portal/portal-wrapper.tsx","../../src/portal/modal-portal.tsx"],"sourcesContent":["export enum EPortalWidth {\n  QUARTER = \"quarter\",\n  HALF = \"half\",\n  THREE_QUARTER = \"three-quarter\",\n  FULL = \"full\",\n}\n\nexport enum EPortalPosition {\n  LEFT = \"left\",\n  RIGHT = \"right\",\n  CENTER = \"center\",\n}\n\nexport const PORTAL_WIDTH_CLASSES = {\n  [EPortalWidth.QUARTER]: \"w-1/4 min-w-80 max-w-96\",\n  [EPortalWidth.HALF]: \"w-1/2 min-w-96 max-w-2xl\",\n  [EPortalWidth.THREE_QUARTER]: \"w-3/4 min-w-96 max-w-5xl\",\n  [EPortalWidth.FULL]: \"w-full\",\n} as const;\n\nexport const PORTAL_POSITION_CLASSES = {\n  [EPortalPosition.LEFT]: \"left-0\",\n  [EPortalPosition.RIGHT]: \"right-0\",\n  [EPortalPosition.CENTER]: \"left-1/2 -translate-x-1/2\",\n} as const;\n\nexport const DEFAULT_PORTAL_ID = \"full-screen-portal\";\nexport const MODAL_Z_INDEX = 25;\n","import React, { useLayoutEffect, useState, useMemo } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { DEFAULT_PORTAL_ID } from \"./constants\";\nimport type { PortalWrapperProps } from \"./types\";\n\n/**\n * PortalWrapper - A reusable portal component that renders children into a specific DOM element\n * Optimized for SSR compatibility and performance\n *\n * @param children - The content to render inside the portal\n * @param portalId - The ID of the DOM element to render into\n * @param fallbackToDocument - Whether to render directly if portal container is not found\n * @param className - Optional className to apply to the portal container div\n * @param onMount - Callback fired when portal is mounted\n * @param onUnmount - Callback fired when portal is unmounted\n */\nexport function PortalWrapper({\n  children,\n  portalId = DEFAULT_PORTAL_ID,\n  fallbackToDocument = true,\n  className,\n  onMount,\n  onUnmount,\n}: PortalWrapperProps) {\n  const [portalContainer, setPortalContainer] = useState<HTMLElement | null>(null);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useLayoutEffect(() => {\n    // Ensure we're in browser environment\n    if (typeof window === \"undefined\") return;\n\n    let container = document.getElementById(portalId);\n\n    // Create portal container if it doesn't exist\n    if (!container) {\n      container = document.createElement(\"div\");\n      container.id = portalId;\n      container.setAttribute(\"data-portal\", \"true\");\n      document.body.appendChild(container);\n    }\n\n    setPortalContainer(container);\n    setIsMounted(true);\n    onMount?.();\n\n    return () => {\n      onUnmount?.();\n      // Only remove if we created it and it's empty\n      if (container && container.children.length === 0 && container.hasAttribute(\"data-portal\")) {\n        document.body.removeChild(container);\n      }\n    };\n  }, [portalId, onMount, onUnmount]);\n\n  const content = useMemo(() => {\n    if (!children) return null;\n    return className ? <div className={className}>{children}</div> : children;\n  }, [children, className]);\n\n  // SSR: render nothing on server\n  if (!isMounted) {\n    return null;\n  }\n\n  // If portal container exists, render into it\n  if (portalContainer) {\n    return createPortal(content, portalContainer);\n  }\n\n  // Fallback behavior for client-side rendering\n  if (fallbackToDocument) {\n    return content ? (content as React.ReactElement) : null;\n  }\n\n  return null;\n}\n","import React, { useCallback, useMemo, useRef, useEffect } from \"react\";\nimport { cn } from \"../utils\";\nimport {\n  EPortalWidth,\n  EPortalPosition,\n  PORTAL_WIDTH_CLASSES,\n  PORTAL_POSITION_CLASSES,\n  DEFAULT_PORTAL_ID,\n  MODAL_Z_INDEX,\n} from \"./constants\";\nimport { PortalWrapper } from \"./portal-wrapper\";\nimport type { ModalPortalProps } from \"./types\";\n\n/**\n * @param children - The modal content to render\n * @param isOpen - Whether the modal is open\n * @param onClose - Function to call when modal should close\n * @param portalId - The ID of the DOM element to render into\n * @param className - Custom className for the modal container\n * @param overlayClassName - Custom className for the overlay\n * @param contentClassName - Custom className for the content area\n * @param width - Predefined width options using EPortalWidth enum\n * @param position - Position of the modal using EPortalPosition enum\n * @param fullScreen - Whether to render in fullscreen mode\n * @param showOverlay - Whether to show background overlay\n * @param closeOnOverlayClick - Whether clicking overlay closes modal\n * @param closeOnEscape - Whether pressing Escape closes modal\n */\nexport function ModalPortal({\n  children,\n  isOpen,\n  onClose,\n  portalId = DEFAULT_PORTAL_ID,\n  className,\n  overlayClassName,\n  contentClassName,\n  width = EPortalWidth.HALF,\n  position = EPortalPosition.RIGHT,\n  fullScreen = false,\n  showOverlay = true,\n  closeOnOverlayClick = true,\n  closeOnEscape = true,\n}: ModalPortalProps) {\n  const contentRef = useRef<HTMLDivElement>(null);\n\n  // Memoized overlay click handler\n  const handleOverlayClick = useCallback(\n    (e: React.MouseEvent) => {\n      if (closeOnOverlayClick && onClose && e.target === e.currentTarget) {\n        onClose();\n      }\n    },\n    [closeOnOverlayClick, onClose]\n  );\n\n  // close on escape\n  const handleEscape = useCallback(\n    (e: KeyboardEvent) => {\n      if (closeOnEscape && onClose && e.key === \"Escape\") {\n        onClose();\n      }\n    },\n    [closeOnEscape, onClose]\n  );\n\n  // add event listener for escape\n  useEffect(() => {\n    if (!isOpen) return;\n    document.addEventListener(\"keydown\", handleEscape);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscape);\n    };\n  }, [isOpen, handleEscape]);\n\n  // Memoized style classes\n  const modalClasses = useMemo(() => {\n    const widthClass = fullScreen ? \"w-full h-full\" : PORTAL_WIDTH_CLASSES[width];\n    const positionClass = fullScreen ? \"\" : PORTAL_POSITION_CLASSES[position];\n\n    return cn(\n      \"top-0 h-full bg-white shadow-lg absolute transition-transform duration-300 ease-out\",\n      widthClass,\n      positionClass,\n      contentClassName\n    );\n  }, [fullScreen, width, position, contentClassName]);\n\n  if (!isOpen) return null;\n\n  const content = (\n    <div\n      className={cn(\"absolute inset-0 h-full w-full overflow-y-auto\", className)}\n      style={{ zIndex: MODAL_Z_INDEX }}\n      role=\"dialog\"\n    >\n      {showOverlay && (\n        <div\n          className={cn(\"absolute inset-0 bg-black bg-opacity-50 transition-opacity duration-300\", overlayClassName)}\n          onClick={handleOverlayClick}\n          aria-hidden=\"true\"\n        />\n      )}\n      <div ref={contentRef} className={cn(modalClasses)} style={{ zIndex: MODAL_Z_INDEX + 1 }} role=\"document\">\n        {children}\n      </div>\n    </div>\n  );\n\n  return <PortalWrapper portalId={portalId}>{content}</PortalWrapper>;\n}\n"],"mappings":";;;;;;;;AAAA,IAAY,wDAAL;AACL;AACA;AACA;AACA;;;AAGF,IAAY,8DAAL;AACL;AACA;AACA;;;AAGF,MAAa,uBAAuB;EACjC,aAAa,UAAU;EACvB,aAAa,OAAO;EACpB,aAAa,gBAAgB;EAC7B,aAAa,OAAO;CACtB;AAED,MAAa,0BAA0B;EACpC,gBAAgB,OAAO;EACvB,gBAAgB,QAAQ;EACxB,gBAAgB,SAAS;CAC3B;AAED,MAAa,oBAAoB;AACjC,MAAa,gBAAgB;;;;;;;;;;;;;;;ACX7B,SAAgB,cAAc,EAC5B,UACA,WAAW,mBACX,qBAAqB,MACrB,WACA,SACA,aACqB;CACrB,MAAM,CAAC,iBAAiB,sBAAsB,SAA6B,KAAK;CAChF,MAAM,CAAC,WAAW,gBAAgB,SAAS,MAAM;AAEjD,uBAAsB;AAEpB,MAAI,OAAO,WAAW,YAAa;EAEnC,IAAI,YAAY,SAAS,eAAe,SAAS;AAGjD,MAAI,CAAC,WAAW;AACd,eAAY,SAAS,cAAc,MAAM;AACzC,aAAU,KAAK;AACf,aAAU,aAAa,eAAe,OAAO;AAC7C,YAAS,KAAK,YAAY,UAAU;;AAGtC,qBAAmB,UAAU;AAC7B,eAAa,KAAK;AAClB,aAAW;AAEX,eAAa;AACX,gBAAa;AAEb,OAAI,aAAa,UAAU,SAAS,WAAW,KAAK,UAAU,aAAa,cAAc,CACvF,UAAS,KAAK,YAAY,UAAU;;IAGvC;EAAC;EAAU;EAAS;EAAU,CAAC;CAElC,MAAM,UAAU,cAAc;AAC5B,MAAI,CAAC,SAAU,QAAO;AACtB,SAAO,YAAY,oBAAC;GAAe;GAAY;IAAe,GAAG;IAChE,CAAC,UAAU,UAAU,CAAC;AAGzB,KAAI,CAAC,UACH,QAAO;AAIT,KAAI,gBACF,QAAO,aAAa,SAAS,gBAAgB;AAI/C,KAAI,mBACF,QAAO,UAAW,UAAiC;AAGrD,QAAO;;;;;;;;;;;;;;;;;;;;AC9CT,SAAgB,YAAY,EAC1B,UACA,QACA,SACA,WAAW,mBACX,WACA,kBACA,kBACA,QAAQ,aAAa,MACrB,WAAW,gBAAgB,OAC3B,aAAa,OACb,cAAc,MACd,sBAAsB,MACtB,gBAAgB,QACG;CACnB,MAAM,aAAa,OAAuB,KAAK;CAG/C,MAAM,qBAAqB,aACxB,MAAwB;AACvB,MAAI,uBAAuB,WAAW,EAAE,WAAW,EAAE,cACnD,UAAS;IAGb,CAAC,qBAAqB,QAAQ,CAC/B;CAGD,MAAM,eAAe,aAClB,MAAqB;AACpB,MAAI,iBAAiB,WAAW,EAAE,QAAQ,SACxC,UAAS;IAGb,CAAC,eAAe,QAAQ,CACzB;AAGD,iBAAgB;AACd,MAAI,CAAC,OAAQ;AACb,WAAS,iBAAiB,WAAW,aAAa;AAClD,eAAa;AACX,YAAS,oBAAoB,WAAW,aAAa;;IAEtD,CAAC,QAAQ,aAAa,CAAC;CAG1B,MAAM,eAAe,cAAc;AAIjC,SAAO,GACL,uFAJiB,aAAa,kBAAkB,qBAAqB,QACjD,aAAa,KAAK,wBAAwB,WAM9D,iBACD;IACA;EAAC;EAAY;EAAO;EAAU;EAAiB,CAAC;AAEnD,KAAI,CAAC,OAAQ,QAAO;AAqBpB,QAAO,oBAAC;EAAwB;YAlB9B,qBAAC;GACC,WAAW,GAAG,kDAAkD,UAAU;GAC1E,OAAO,EAAE,QAAQ,eAAe;GAChC,MAAK;cAEJ,eACC,oBAAC;IACC,WAAW,GAAG,2EAA2E,iBAAiB;IAC1G,SAAS;IACT,eAAY;KACZ,EAEJ,oBAAC;IAAI,KAAK;IAAY,WAAW,GAAG,aAAa;IAAE,OAAO,EAAE,QAAQ,gBAAgB,GAAG;IAAE,MAAK;IAC3F;KACG;IACF;GAG2D"}
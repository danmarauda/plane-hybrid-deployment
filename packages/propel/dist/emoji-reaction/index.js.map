{"version":3,"file":"index.js","names":["React","EmojiReaction","EmojiReactionButton","EmojiReactionGroup"],"sources":["../../src/emoji-reaction/emoji-reaction.tsx","../../src/emoji-reaction/emoji-reaction-picker.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { AnimatedCounter } from \"../animated-counter\";\nimport { stringToEmoji } from \"../emoji-icon-picker\";\nimport { AddReactionIcon } from \"../icons\";\nimport { Tooltip } from \"../tooltip\";\nimport { cn } from \"../utils\";\n\nexport interface EmojiReactionType {\n  emoji: string;\n  count: number;\n  reacted?: boolean;\n  users?: string[];\n}\n\nexport interface EmojiReactionProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  emoji: string;\n  count: number;\n  reacted?: boolean;\n  users?: string[];\n  onReactionClick?: (emoji: string) => void;\n  className?: string;\n  showCount?: boolean;\n}\n\nexport interface EmojiReactionGroupProps extends React.HTMLAttributes<HTMLDivElement> {\n  reactions: EmojiReactionType[];\n  onReactionClick?: (emoji: string) => void;\n  onAddReaction?: () => void;\n  className?: string;\n  showAddButton?: boolean;\n  maxDisplayUsers?: number;\n}\n\nexport interface EmojiReactionButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  onAddReaction?: () => void;\n  className?: string;\n}\n\nconst EmojiReaction = React.forwardRef(function EmojiReaction(\n  {\n    emoji,\n    count,\n    reacted = false,\n    users = [],\n    onReactionClick,\n    className,\n    showCount = true,\n    ...props\n  }: EmojiReactionProps,\n  ref: React.ForwardedRef<HTMLButtonElement>\n) {\n  const handleClick = () => {\n    onReactionClick?.(emoji);\n  };\n\n  const tooltipContent = React.useMemo(() => {\n    if (!users.length) return null;\n\n    const displayUsers = users.slice(0, 5);\n    const remainingCount = users.length - displayUsers.length;\n\n    return (\n      <div className=\"text-xs\">\n        <div className=\"font-medium mb-1\">{stringToEmoji(emoji)}</div>\n        <div>\n          {displayUsers.join(\", \")}\n          {remainingCount > 0 && ` and ${remainingCount} more`}\n        </div>\n      </div>\n    );\n  }, [emoji, users]);\n\n  const button = (\n    <button\n      ref={ref}\n      onClick={handleClick}\n      className={cn(\n        \"inline-flex items-center rounded-full border px-1.5 text-xs gap-0.5 transition-all duration-200\",\n        reacted\n          ? \"bg-custom-primary-100/10 border-custom-primary-100 text-custom-primary-100\"\n          : \"bg-custom-background-100 border-custom-border-200 text-custom-text-300 hover:border-custom-border-300 hover:bg-custom-background-90\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"text-base leading-unset\">{emoji}</span>\n      {showCount && count > 0 && <AnimatedCounter count={count} size=\"sm\" className=\"text-xs leading-normal\" />}\n    </button>\n  );\n\n  if (tooltipContent && users.length > 0) {\n    return <Tooltip tooltipContent={tooltipContent}>{button}</Tooltip>;\n  }\n\n  return button;\n});\n\nconst EmojiReactionButton = React.forwardRef(function EmojiReactionButton(\n  { onAddReaction, className, ...props }: EmojiReactionButtonProps,\n  ref: React.ForwardedRef<HTMLButtonElement>\n) {\n  return (\n    <button\n      ref={ref}\n      onClick={onAddReaction}\n      className={cn(\n        \"inline-flex items-center justify-center rounded-full border border-dashed border-custom-border-300\",\n        \"bg-custom-background-100 text-custom-text-400 transition-all duration-200\",\n        \"hover:border-custom-primary-100 hover:text-custom-primary-100 hover:bg-custom-primary-100/5\",\n        \"focus:outline-none focus:ring-2 focus:ring-custom-primary-100/20 focus:ring-offset-1\",\n        \"h-6 w-6\",\n        className\n      )}\n      title=\"Add reaction\"\n      {...props}\n    >\n      <AddReactionIcon className=\"h-3 w-3\" />\n    </button>\n  );\n});\n\nconst EmojiReactionGroup = React.forwardRef(function EmojiReactionGroup(\n  {\n    reactions,\n    onReactionClick,\n    onAddReaction,\n    className,\n    showAddButton = true,\n    maxDisplayUsers = 5,\n    ...props\n  }: EmojiReactionGroupProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  return (\n    <div ref={ref} className={cn(\"flex flex-wrap items-center gap-2\", className)} {...props}>\n      {reactions.map((reaction, index) => (\n        <EmojiReaction\n          key={`${reaction.emoji}-${index}`}\n          emoji={reaction.emoji}\n          count={reaction.count}\n          reacted={reaction.reacted}\n          users={reaction.users?.slice(0, maxDisplayUsers)}\n          onReactionClick={onReactionClick}\n        />\n      ))}\n      {showAddButton && <EmojiReactionButton onAddReaction={onAddReaction} />}\n    </div>\n  );\n});\n\nEmojiReaction.displayName = \"EmojiReaction\";\nEmojiReactionButton.displayName = \"EmojiReactionButton\";\nEmojiReactionGroup.displayName = \"EmojiReactionGroup\";\n\nexport { EmojiReaction, EmojiReactionButton, EmojiReactionGroup };\n","import React, { useMemo, useCallback } from \"react\";\nimport { EmojiRoot } from \"../emoji-icon-picker/emoji/emoji\";\nimport { emojiToString } from \"../emoji-icon-picker/helper\";\nimport { Popover } from \"../popover\";\nimport { cn } from \"../utils/classname\";\nimport { convertPlacementToSideAndAlign } from \"../utils/placement\";\nimport type { TPlacement, TSide, TAlign } from \"../utils/placement\";\n\nexport interface EmojiReactionPickerProps {\n  isOpen: boolean;\n  handleToggle: (value: boolean) => void;\n  buttonClassName?: string;\n  closeOnSelect?: boolean;\n  disabled?: boolean;\n  dropdownClassName?: string;\n  label: React.ReactNode;\n  onChange: (emoji: string) => void;\n  placement?: TPlacement;\n  searchDisabled?: boolean;\n  searchPlaceholder?: string;\n  side?: TSide;\n  align?: TAlign;\n}\n\nexport function EmojiReactionPicker(props: EmojiReactionPickerProps) {\n  const {\n    isOpen,\n    handleToggle,\n    buttonClassName,\n    closeOnSelect = true,\n    disabled = false,\n    dropdownClassName,\n    label,\n    onChange,\n    placement = \"bottom-start\",\n    searchDisabled = false,\n    searchPlaceholder = \"Search\",\n    side = \"bottom\",\n    align = \"start\",\n  } = props;\n\n  // side and align calculations\n  const { finalSide, finalAlign } = useMemo(() => {\n    if (placement) {\n      const converted = convertPlacementToSideAndAlign(placement);\n      return { finalSide: converted.side, finalAlign: converted.align };\n    }\n    return { finalSide: side, finalAlign: align };\n  }, [placement, side, align]);\n\n  const handleEmojiChange = useCallback(\n    (value: string) => {\n      const emoji = emojiToString(value);\n      onChange(emoji);\n      if (closeOnSelect) handleToggle(false);\n    },\n    [onChange, closeOnSelect, handleToggle]\n  );\n\n  return (\n    <Popover open={isOpen} onOpenChange={handleToggle}>\n      <Popover.Button className={cn(\"outline-none\", buttonClassName)} disabled={disabled}>\n        {label}\n      </Popover.Button>\n      <Popover.Panel\n        positionerClassName=\"z-50\"\n        className={cn(\n          \"w-80 bg-custom-background-100 rounded-md border-[0.5px] border-custom-border-300 overflow-hidden\",\n          dropdownClassName\n        )}\n        side={finalSide}\n        align={finalAlign}\n        sideOffset={8}\n        data-prevent-outside-click=\"true\"\n      >\n        <div className=\"h-80 overflow-hidden overflow-y-auto\">\n          <EmojiRoot\n            onChange={handleEmojiChange}\n            searchPlaceholder={searchPlaceholder}\n            searchDisabled={searchDisabled}\n          />\n        </div>\n      </Popover.Panel>\n    </Popover>\n  );\n}\n"],"mappings":"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"}
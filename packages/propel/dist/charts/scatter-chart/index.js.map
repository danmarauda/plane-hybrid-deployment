{"version":3,"file":"index.js","names":["ScatterChart","keys: string[]","labels: Record<string, string>","colors: Record<string, string>","CoreScatterChart","props"],"sources":["../../../src/charts/scatter-chart/root.tsx"],"sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport {\n  CartesianGrid,\n  ScatterChart as CoreScatterChart,\n  Legend,\n  Scatter,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from \"recharts\";\n// plane imports\nimport { AXIS_LABEL_CLASSNAME } from \"@plane/constants\";\nimport type { TScatterChartProps } from \"@plane/types\";\n// local components\nimport { getLegendProps } from \"../components/legend\";\nimport { CustomXAxisTick, CustomYAxisTick } from \"../components/tick\";\nimport { CustomTooltip } from \"../components/tooltip\";\n\nexport const ScatterChart = React.memo(function ScatterChart<K extends string, T extends string>(\n  props: TScatterChartProps<K, T>\n) {\n  const {\n    data,\n    scatterPoints,\n    margin,\n    xAxis,\n    yAxis,\n    className,\n    customTicks,\n    tickCount = {\n      x: undefined,\n      y: 10,\n    },\n    legend,\n    showTooltip = true,\n    customTooltipContent,\n  } = props;\n  // states\n  const [activePoint, setActivePoint] = useState<string | null>(null);\n  const [activeLegend, setActiveLegend] = useState<string | null>(null);\n\n  //derived values\n  const { itemKeys, itemLabels, itemDotColors } = useMemo(() => {\n    const keys: string[] = [];\n    const labels: Record<string, string> = {};\n    const colors: Record<string, string> = {};\n\n    for (const point of scatterPoints) {\n      keys.push(point.key);\n      labels[point.key] = point.label;\n      colors[point.key] = point.fill;\n    }\n    return { itemKeys: keys, itemLabels: labels, itemDotColors: colors };\n  }, [scatterPoints]);\n\n  const renderPoints = useMemo(\n    () =>\n      scatterPoints.map((point) => (\n        <Scatter\n          key={point.key}\n          dataKey={point.key}\n          fill={point.fill}\n          stroke={point.stroke}\n          opacity={!!activeLegend && activeLegend !== point.key ? 0.1 : 1}\n          onMouseEnter={() => setActivePoint(point.key)}\n          onMouseLeave={() => setActivePoint(null)}\n        />\n      )),\n    [activeLegend, scatterPoints]\n  );\n\n  return (\n    <div className={className}>\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <CoreScatterChart\n          data={data}\n          margin={{\n            top: margin?.top === undefined ? 5 : margin.top,\n            right: margin?.right === undefined ? 30 : margin.right,\n            bottom: margin?.bottom === undefined ? 5 : margin.bottom,\n            left: margin?.left === undefined ? 20 : margin.left,\n          }}\n        >\n          <CartesianGrid stroke=\"rgba(var(--color-border-100), 0.8)\" vertical={false} />\n          <XAxis\n            dataKey={xAxis.key}\n            tick={(props) => {\n              const TickComponent = customTicks?.x || CustomXAxisTick;\n              return <TickComponent {...props} />;\n            }}\n            tickLine={false}\n            axisLine={false}\n            label={\n              xAxis.label && {\n                value: xAxis.label,\n                dy: 28,\n                className: AXIS_LABEL_CLASSNAME,\n              }\n            }\n            tickCount={tickCount.x}\n          />\n          <YAxis\n            domain={yAxis.domain}\n            tickLine={false}\n            axisLine={false}\n            label={\n              yAxis.label && {\n                value: yAxis.label,\n                angle: -90,\n                position: \"bottom\",\n                offset: -24,\n                dx: yAxis.dx ?? -16,\n                className: AXIS_LABEL_CLASSNAME,\n              }\n            }\n            tick={(props) => {\n              const TickComponent = customTicks?.y || CustomYAxisTick;\n              return <TickComponent {...props} />;\n            }}\n            tickCount={tickCount.y}\n            allowDecimals={!!yAxis.allowDecimals}\n          />\n          {legend && (\n            // @ts-expect-error recharts types are not up to date\n            <Legend\n              onMouseEnter={(payload) => setActiveLegend(payload.value)}\n              onMouseLeave={() => setActiveLegend(null)}\n              formatter={(value) => itemLabels[value]}\n              {...getLegendProps(legend)}\n            />\n          )}\n          {showTooltip && (\n            <Tooltip\n              cursor={{\n                stroke: \"rgba(var(--color-text-300))\",\n                strokeDasharray: \"4 4\",\n              }}\n              wrapperStyle={{\n                pointerEvents: \"auto\",\n              }}\n              content={({ active, label, payload }) =>\n                customTooltipContent ? (\n                  customTooltipContent({ active, label, payload })\n                ) : (\n                  <CustomTooltip\n                    active={active}\n                    activeKey={activePoint}\n                    label={label}\n                    payload={payload}\n                    itemKeys={itemKeys}\n                    itemLabels={itemLabels}\n                    itemDotColors={itemDotColors}\n                  />\n                )\n              }\n            />\n          )}\n          {renderPoints}\n        </CoreScatterChart>\n      </ResponsiveContainer>\n    </div>\n  );\n});\nScatterChart.displayName = \"ScatterChart\";\n"],"mappings":";;;;;;;;;;AAmBA,MAAa,eAAe,MAAM,KAAK,SAASA,eAC9C,OACA;CACA,MAAM,EACJ,MACA,eACA,QACA,OACA,OACA,WACA,aACA,YAAY;EACV,GAAG;EACH,GAAG;EACJ,EACD,QACA,cAAc,MACd,yBACE;CAEJ,MAAM,CAAC,aAAa,kBAAkB,SAAwB,KAAK;CACnE,MAAM,CAAC,cAAc,mBAAmB,SAAwB,KAAK;CAGrE,MAAM,EAAE,UAAU,YAAY,kBAAkB,cAAc;EAC5D,MAAMC,OAAiB,EAAE;EACzB,MAAMC,SAAiC,EAAE;EACzC,MAAMC,SAAiC,EAAE;AAEzC,OAAK,MAAM,SAAS,eAAe;AACjC,QAAK,KAAK,MAAM,IAAI;AACpB,UAAO,MAAM,OAAO,MAAM;AAC1B,UAAO,MAAM,OAAO,MAAM;;AAE5B,SAAO;GAAE,UAAU;GAAM,YAAY;GAAQ,eAAe;GAAQ;IACnE,CAAC,cAAc,CAAC;CAEnB,MAAM,eAAe,cAEjB,cAAc,KAAK,UACjB,oBAAC;EAEC,SAAS,MAAM;EACf,MAAM,MAAM;EACZ,QAAQ,MAAM;EACd,SAAS,CAAC,CAAC,gBAAgB,iBAAiB,MAAM,MAAM,KAAM;EAC9D,oBAAoB,eAAe,MAAM,IAAI;EAC7C,oBAAoB,eAAe,KAAK;IANnC,MAAM,IAOX,CACF,EACJ,CAAC,cAAc,cAAc,CAC9B;AAED,QACE,oBAAC;EAAe;YACd,oBAAC;GAAoB,OAAM;GAAO,QAAO;aACvC,qBAACC;IACO;IACN,QAAQ;KACN,KAAK,QAAQ,QAAQ,SAAY,IAAI,OAAO;KAC5C,OAAO,QAAQ,UAAU,SAAY,KAAK,OAAO;KACjD,QAAQ,QAAQ,WAAW,SAAY,IAAI,OAAO;KAClD,MAAM,QAAQ,SAAS,SAAY,KAAK,OAAO;KAChD;;KAED,oBAAC;MAAc,QAAO;MAAqC,UAAU;OAAS;KAC9E,oBAAC;MACC,SAAS,MAAM;MACf,OAAO,YAAU;AAEf,cAAO,oBADe,aAAa,KAAK,mBAClB,GAAIC,UAAS;;MAErC,UAAU;MACV,UAAU;MACV,OACE,MAAM,SAAS;OACb,OAAO,MAAM;OACb,IAAI;OACJ,WAAW;OACZ;MAEH,WAAW,UAAU;OACrB;KACF,oBAAC;MACC,QAAQ,MAAM;MACd,UAAU;MACV,UAAU;MACV,OACE,MAAM,SAAS;OACb,OAAO,MAAM;OACb,OAAO;OACP,UAAU;OACV,QAAQ;OACR,IAAI,MAAM,MAAM;OAChB,WAAW;OACZ;MAEH,OAAO,YAAU;AAEf,cAAO,oBADe,aAAa,KAAK,mBAClB,GAAIA,UAAS;;MAErC,WAAW,UAAU;MACrB,eAAe,CAAC,CAAC,MAAM;OACvB;KACD,UAEC,oBAAC;MACC,eAAe,YAAY,gBAAgB,QAAQ,MAAM;MACzD,oBAAoB,gBAAgB,KAAK;MACzC,YAAY,UAAU,WAAW;MACjC,GAAI,eAAe,OAAO;OAC1B;KAEH,eACC,oBAAC;MACC,QAAQ;OACN,QAAQ;OACR,iBAAiB;OAClB;MACD,cAAc,EACZ,eAAe,QAChB;MACD,UAAU,EAAE,QAAQ,OAAO,cACzB,uBACE,qBAAqB;OAAE;OAAQ;OAAO;OAAS,CAAC,GAEhD,oBAAC;OACS;OACR,WAAW;OACJ;OACE;OACC;OACE;OACG;QACf;OAGN;KAEH;;KACgB;IACC;GAClB;EAER;AACF,aAAa,cAAc"}
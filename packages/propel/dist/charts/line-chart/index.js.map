{"version":3,"file":"index.js","names":["LineChart","keys: string[]","labels: Record<string, string>","colors: Record<string, string>","CoreLineChart","props"],"sources":["../../../src/charts/line-chart/root.tsx"],"sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport {\n  CartesianGrid,\n  LineChart as CoreLineChart,\n  Legend,\n  Line,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from \"recharts\";\n// plane imports\nimport { AXIS_LABEL_CLASSNAME } from \"@plane/constants\";\nimport type { TLineChartProps } from \"@plane/types\";\n// local components\nimport { getLegendProps } from \"../components/legend\";\nimport { CustomXAxisTick, CustomYAxisTick } from \"../components/tick\";\nimport { CustomTooltip } from \"../components/tooltip\";\n\nexport const LineChart = React.memo(function LineChart<K extends string, T extends string>(\n  props: TLineChartProps<K, T>\n) {\n  const {\n    data,\n    lines,\n    margin,\n    xAxis,\n    yAxis,\n    className,\n    tickCount = {\n      x: undefined,\n      y: 10,\n    },\n    customTicks,\n    legend,\n    showTooltip = true,\n    customTooltipContent,\n  } = props;\n  // states\n  const [activeLine, setActiveLine] = useState<string | null>(null);\n  const [activeLegend, setActiveLegend] = useState<string | null>(null);\n\n  // derived values\n  const { itemKeys, itemLabels, itemDotColors } = useMemo(() => {\n    const keys: string[] = [];\n    const labels: Record<string, string> = {};\n    const colors: Record<string, string> = {};\n\n    for (const line of lines) {\n      keys.push(line.key);\n      labels[line.key] = line.label;\n      colors[line.key] = line.stroke;\n    }\n\n    return { itemKeys: keys, itemLabels: labels, itemDotColors: colors };\n  }, [lines]);\n\n  const renderLines = useMemo(\n    () =>\n      lines.map((line) => (\n        <Line\n          key={line.key}\n          dataKey={line.key}\n          type={line.smoothCurves ? \"monotone\" : \"linear\"}\n          className=\"[&_path]:transition-opacity [&_path]:duration-200\"\n          opacity={!!activeLegend && activeLegend !== line.key ? 0.1 : 1}\n          fill={line.fill}\n          stroke={line.stroke}\n          strokeWidth={2}\n          strokeDasharray={line.dashedLine ? \"4 4\" : \"none\"}\n          dot={\n            line.showDot\n              ? {\n                  fill: line.fill,\n                  fillOpacity: 1,\n                }\n              : false\n          }\n          activeDot={{\n            stroke: line.fill,\n          }}\n          onMouseEnter={() => setActiveLine(line.key)}\n          onMouseLeave={() => setActiveLine(null)}\n        />\n      )),\n    [activeLegend, lines]\n  );\n\n  return (\n    <div className={className}>\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <CoreLineChart\n          data={data}\n          margin={{\n            top: margin?.top === undefined ? 5 : margin.top,\n            right: margin?.right === undefined ? 30 : margin.right,\n            bottom: margin?.bottom === undefined ? 5 : margin.bottom,\n            left: margin?.left === undefined ? 20 : margin.left,\n          }}\n        >\n          <CartesianGrid stroke=\"rgba(var(--color-border-100), 0.8)\" vertical={false} />\n          <XAxis\n            dataKey={xAxis.key}\n            tick={(props) => {\n              const TickComponent = customTicks?.x || CustomXAxisTick;\n              return <TickComponent {...props} />;\n            }}\n            tickLine={false}\n            axisLine={false}\n            label={\n              xAxis.label && {\n                value: xAxis.label,\n                dy: 28,\n                className: AXIS_LABEL_CLASSNAME,\n              }\n            }\n            tickCount={tickCount.x}\n          />\n          <YAxis\n            domain={yAxis.domain}\n            tickLine={false}\n            axisLine={false}\n            label={\n              yAxis.label && {\n                value: yAxis.label,\n                angle: -90,\n                position: \"bottom\",\n                offset: -24,\n                dx: yAxis.dx ?? -16,\n                className: AXIS_LABEL_CLASSNAME,\n              }\n            }\n            tick={(props) => {\n              const TickComponent = customTicks?.y || CustomYAxisTick;\n              return <TickComponent {...props} />;\n            }}\n            tickCount={tickCount.y}\n            allowDecimals={!!yAxis.allowDecimals}\n          />\n          {legend && (\n            // @ts-expect-error recharts types are not up to date\n            <Legend\n              onMouseEnter={(payload) => setActiveLegend(payload.value)}\n              onMouseLeave={() => setActiveLegend(null)}\n              formatter={(value) => itemLabels[value]}\n              {...getLegendProps(legend)}\n            />\n          )}\n          {showTooltip && (\n            <Tooltip\n              cursor={{\n                stroke: \"rgba(var(--color-text-300))\",\n                strokeDasharray: \"4 4\",\n              }}\n              wrapperStyle={{\n                pointerEvents: \"auto\",\n              }}\n              content={({ active, label, payload }) => {\n                if (customTooltipContent) return customTooltipContent({ active, label, payload });\n                return (\n                  <CustomTooltip\n                    active={active}\n                    activeKey={activeLine}\n                    label={label}\n                    payload={payload}\n                    itemKeys={itemKeys}\n                    itemLabels={itemLabels}\n                    itemDotColors={itemDotColors}\n                  />\n                );\n              }}\n            />\n          )}\n          {renderLines}\n        </CoreLineChart>\n      </ResponsiveContainer>\n    </div>\n  );\n});\nLineChart.displayName = \"LineChart\";\n"],"mappings":"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"}